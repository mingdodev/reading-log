# 1. HTTP 개관

- **HTTP**
    - Hypertext Transfer Protocol
    - 현대 인터넷의 공용어

<br>

❗️ **TO DO**

- 리소스(웹 콘텐츠)는 어디서 오는가
- 웹 트랜잭션은 어떻게 동작하나
- HTTP 기저의 TCP 네트워크 전송. 메시지의 형식
- HTTP 프로토콜의 여러 종류

<br>

## 1.1 HTTP: 인터넷의 멀티미디어 배달부

- HTTP는 이미지, 페이지, 텍스트 파일, 동영상, 음성 파일, 자바 애플릿 (조그마한 응용 프로그램) 등을 실어나른다.
- 신뢰성 있는 데이터 전송 프로토콜 → 손상되거나 꼬인 정보가 아니다.

<br>

## 1.2 웹 클라이언트와 서버

**< World Wide WEB>**

- WEB Client ↔ WEB Server
    - HTTP req, res
    - 웹 콘텐츠는 웹 서버에 존재한다.
    - 가장 흔한 웹 클라이언트는 웹 브라우저

<br>

## 1.3 리소스

- **웹 서버**는 웹 리소스를 관리하고 제공
- **웹 리소스**는 웹 콘텐츠의 원천
    - 정적 파일
    
    e.g. 웹 서버 파일 시스템의 정적 파일
    
    - 동적 콘텐츠 리소스
        - 요청에 따라 콘텐츠를 생산하는 프로그램
    
    e.g. 웹 캠 게이트웨이, 주식 거래 게이트웨이, 전자상거래 게이트웨이 등
    
- 인터넷 검색엔진도 리소스

### 미디어 타입

- 객체에는 MIME 타입 이라는 데이터 타입 라벨을 붙인다.
    - 원래 전자메일에서 쓰던 방식
    - 이를 통해 다룰 수 있는 객체인지 확인
    
    **e.g.** MIME type
    
    ```
    # 주타입 image 부타입 jpeg
    Content-type: image/jpeg
    Content-length: 12984
    
    text/html, text/plain, image/gif, video/quicktime, application/vnd.ms-powerpoint ...
    ```
    

### URI

- 통합 자원 식별자 Uniform resource identifier
    - 웹 서버 리소스 각자의 이름
    - 인터넷의 우편물 주소 같은 것
    
    **e.g. URL은 프로토콜, 서버, 리소스를 명시한다.**
    
    - `http://` http 프로토콜을 사용하라
    - `/www.hey.com` ~로 이동하라
    - `/hi/cat.gif` ~라고 불리는 리소스를 가져와라

**URL**

uniform resource locator

특정 서버의 한 리소스에 대한 구체적인 위치를 서술

- 첫 번째 부분 ‘scheme’: protocol
- 두 번째 부분: server의 internet address
- 마지막: web server의 resource

**URN**

uniform resource name

콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름

e.g. urn:ietf:rfc:2141 → 인터넷 표준문서 RFC 2141이 어디에 있거나 상관없이 그것을 지칭할 수 있음

아직 일반적으로 채택 X 하지만 전망 밝다~

따라서 대부분의 URI은 URL

<br>

## 1.4 트랜잭션

- 요청과 응답메시지로 구성된 HTTP 트랜잭션
- req (명령과 URI) - res (트랜잭션의 결과)

### 메서드

- 서버에게 어떤 동작이 취해져야 하는지 말해준다.
- 모든 요청 메시지는 한 개의 메서드를 갖는다.
- HTTP의 대표적인 메서드
    - **GET** 서버에서 클라이언트로 지정한 리소스를 보내라
    - **PUT** 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라
    - **DELETE** 지정한 리소스를 서버에서 삭제하라
    - **POST** 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라
    - **HEAD** 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라

### 상태코드

- 모든 응답 메시지는 상태코드와 함께 반환된다.
- 세 자리 숫자
    - **200** ok. 문서가 바르게 반환되었다.
    - **302** 다시 보내라. 다른 곳에 가서 리소스를 가져가라.
    - **404** 없음. 리소스를 찾을 수 없다.

웹 페이지는 리소스의 모음이다. 리소스들은 다양한 서버에서 가져와질 수도 있는 것~

<br>

## 1.5 메시지

- 이진 형식이 아닌 일반 텍스트. 줄 단위 텍스트 구조
- 요청과 응답 두 개
- **시작줄, 헤더, 본문**으로 구성
- **시작줄**
    - GET /test/hi.tex HTTP/1.0 ↔ HTTP/1.0 200 OK
- **헤더**
    - :으로 구분되어있는 헤더 필드
    - 헤더는 빈 줄로 끝님
    - Accept: text/* / Accept-Language: en, ko ↔ Content-type / Content-length
- **본문**
    - 본문은 임의의 이진 데이터(이미지, 비디오, 응용 소프트웨어 등)을 포함할 수 있음
    - ← Hey~ I’m a message~

<br>

## 1.6 TCP 커넥션

HTTP 메시지는 TCP 커넥션을 통해 이동

HTTP는 애플리케이션 계층의 프로토콜로 네트워크 통신은 TCP/IP 프로토콜에게 맡김

데이터 손실, 손상, 순서 바뀌는 등 X 신뢰성 있는 통신

TCP 커넥션을 위해서는 IP, port num이 필요한데? URL로 알 수 있다.

http://(IP address or Domain name or host name):(port or default 80)/index.html

<br>

## 1.7 프로토콜 버전

0.9 HTML을 보내기 위한 버전을 시작으로 쭉쭉

<br>

## 1.8 웹의 구성요소

### 프락시

클라이언트와 서버 사이에 위치한 HTTP 중개자. 보안을 위해 사용.

### 캐시

많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고

웹캐시, 캐시 프락시

### 게이트웨이

다른 애플리케이션과 연결된 특별한 웹 서버. 서버들의 중개자

주로 HTTP 프로토콜을 다른 프로토콜로 변환할 때 사용

자기가 진짜 서버인 것처럼 동작해서 클라이언트도 자기가 게이트웨이와 통신하고 있는지 모를 걸 ~

e.g. HTTP 요청을 받고, FTP 프로토콜을 이용해 문서를 가져온다. 이를 HTTP 메시지에 담아 클라이언트에게.

### 터널

단순히 HTTP 통신을 전달하기만 하는 특별한 프락시

주로 HTTP 데이터가 아닌 데이터를 HTTP 연결을 통해 그대로 전송해주기 위해 사용

### 에이전트

자동화된 HTTP 요청을 만드는 semi-intelligent 웹클라이언트